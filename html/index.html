<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASF 账号导入工具</title>
    <link rel="stylesheet" href="/style.css">
    <script src="/script.js"></script>
</head>

<body>
    <div id="app"></div>

    <div class="app">
        <!-- 账号信息输入区域 -->
        <div class="section">
            <h2>账号信息</h2>
            <textarea v-model="accountText" @dragover.prevent="isDragOver = true"
                @dragleave.prevent="isDragOver = false" @drop.prevent="onAccountFileDrop" @input="updateAccountCount"
                :class="{ 'drag-over': isDragOver }"
                placeholder="每行一个账号，用 ---- 或者, 分隔账号名和密码&#10;例如：username----password"></textarea>

            <p>
                共 {{ accountCount }} 个机器人账号, 支持拖拽文件到文本框中自动读取内容
            </p>
            <div class="input-group">
                <input type="file" @change="onSelectAccounts" accept="*/txt" />
            </div>
        </div>

        <!-- 文件夹选择区域 -->
        <div class="section">
            <h2>令牌信息</h2>
            <div class="input-group">
                <input type="file" webkitdirectory directory multiple @change="onSelectMaFiles" />
            </div>
        </div>

        <div class="section">
            <button @click="doImport">执行导入</button>
        </div>

        <!-- 数据表格 -->
        <div class="section">
            <h2>导入结果</h2>
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>账号</th>
                            <th>密码</th>
                            <th>IdentitySecret</th>
                            <th>SharedSecret</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-if="importResult.length === 0">
                            <td colspan="4" class="no-data">
                                暂无数据，请先输入账号信息并选择文件夹
                            </td>
                        </tr>

                        <tr v-for="(account, index) in importResult" :key="index">
                            <td :class="{ 'null-value': account.username === null }">
                                {{ account.username ?? "null" }}
                            </td>
                            <td :class="{ 'null-value': account.password === null }">
                                {{ account.password ?? "null" }}
                            </td>
                            <td :class="{ 'null-value': account.secret1 === null }">
                                {{ account.identitySecret ?? "null" }}
                            </td>
                            <td :class="{ 'null-value': account.secret2 === null }">
                                {{ account.sharedSecret ?? "null" }}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>

</html>